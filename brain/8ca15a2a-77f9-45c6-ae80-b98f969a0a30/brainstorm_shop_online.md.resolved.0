## ğŸ§  Brainstorm: Chuyá»ƒn Dá»¯ liá»‡u Cá»­a hÃ ng lÃªn Online & TÃ¹y chá»‰nh Tá»a Ä‘á»™

### Context
Hiá»‡n táº¡i, toÃ n bá»™ danh sÃ¡ch Ä‘á»“ trong Cá»­a hÃ ng (MÅ©, KÃ­nh, VÃ²ng cá»•) vÃ  toáº¡ Ä‘á»™ hiá»ƒn thá»‹ (top, scale, dx, dy) Ä‘ang Ä‘Æ°á»£c code "cá»©ng" (hard-code) bÃªn trong app (táº¡i [shop_data.dart](file:///Users/devsang/Developer/App%20Learn%20English/lib/data/data_sources/shop_data.dart) vÃ  [maxy_avatar.dart](file:///Users/devsang/Developer/App%20Learn%20English/lib/presentation/widgets/maxy_avatar.dart)). NgÆ°á»i dÃ¹ng muá»‘n:
1. Chuyá»ƒn cÃ¡c item trang trÃ­ nÃ y thÃ nh dá»¯ liá»‡u online (giá»‘ng Firebase cá»§a Topic) Ä‘á»ƒ dá»… dÃ ng thÃªm/sá»­a Ä‘á»“ sá»± kiá»‡n mÃ  khÃ´ng cáº§n update app.
2. LÆ°u luÃ´n cÃ¡c tham sá»‘ lá»‡ch tá»a Ä‘á»™ (`dx`, `dy`, `scale`) vÃ o Model Ä‘á»ƒ dá»… chá»‰nh sá»­a.
3. Giá»¯ láº¡i cÃ¡c gÃ³i NÄƒng lÆ°á»£ng (Energy) trá»±c tiáº¿p trong app (vÃ¬ chÃºng lÃ  hÃ ng thiáº¿t yáº¿u, cá»‘ Ä‘á»‹nh).

---

### Cáº­p nháº­t cáº¥u trÃºc `ShopItemModel`
TrÆ°á»›c khi triá»ƒn khai, ta buá»™c pháº£i thÃªm cÃ¡c trÆ°á»ng offset vÃ o model.
```dart
class ShopItemModel {
  final String id;
  final String name;
  final String assetPath;
  final int price;
  final String type;
  final String category;
  
  // -- CÃ¡c trÆ°á»ng má»›i --
  final double dx;
  final double dy;
  final double scale;
  final bool isOnline; // Äá»ƒ phÃ¢n biá»‡t Ä‘á»“ fetch tá»« máº¡ng vÃ  Ä‘á»“ local (nÄƒng lÆ°á»£ng)
  
  // ... (constructor & fromJson / toJson)
}
```

---

### Option A: LÆ°u tháº³ng lÃªn Cloud Firestore (Giáº¥y tá» nhÆ° Collection `topics`)
Táº¡o má»™t collection má»›i trÃªn Firebase tÃªn lÃ  `shop_items`. Má»—i document Ä‘áº¡i diá»‡n cho má»™t mÃ³n Ä‘á»“ (MÅ©, KÃ­nh). Khi vÃ o app, [ShopController](file:///Users/devsang/Developer/App%20Learn%20English/lib/presentation/controllers/shop_controller.dart#10-211) sáº½ fetch danh sÃ¡ch nÃ y vá» vÃ  gá»™p chung vá»›i danh sÃ¡ch NÄƒng lÆ°á»£ng local.

âœ… **Pros:**
- Chuáº©n nháº¥t, tÆ°Æ¡ng Ä‘á»“ng 100% vá»›i cÃ¡ch app Ä‘ang quáº£n lÃ½ `topics`.
- CÃ³ thá»ƒ dÃ¹ng FireCMS (náº¿u cÃ³) Ä‘á»ƒ thÃªm bá»›t mÅ© nÃ³n dá»… dÃ ng, Ä‘iá»n toáº¡ Ä‘á»™ báº±ng giao diá»‡n web.
- Há»— trá»£ tá»‘t náº¿u sau nÃ y muá»‘n thÃªm tÃ­nh nÄƒng "Äá»“ giá»›i háº¡n" (Limited edition) Ä‘áº¿m ngÆ°á»£c sá»‘ lÆ°á»£ng.

âŒ **Cons:**
- Tá»‘n lÆ°á»£t read (Ä‘á»c) cá»§a Firebase má»—i láº§n ngÆ°á»i dÃ¹ng má»Ÿ Cá»­a hÃ ng (dÃ¹ ráº¥t Ã­t).
- Cáº§n viáº¿t logic sync (Ä‘á»“ng bá»™) giá»¯ Ä‘á»“ Ä‘Ã£ trang bá»‹ (náº¿u offline thÃ¬ mÃ¨o máº¥t Ä‘á»“?). Cáº§n cache (lÆ°u nhÃ¡p) xuá»‘ng mÃ¡y.

ğŸ“Š **Effort:** Medium | **KhuyÃªn dÃ¹ng:** Ráº¥t tá»‘t náº¿u app liÃªn tá»¥c cÃ³ sá»± kiá»‡n.

---

### Option B: Sá»­ dá»¥ng Firebase Remote Config (Cáº¥u hÃ¬nh Ä‘Ã¡m mÃ¢y)
Thay vÃ¬ táº¡o collection database, lÆ°u toÃ n bá»™ danh sÃ¡ch Ä‘á»“ dÆ°á»›i dáº¡ng má»™t chuá»—i JSON khá»•ng lá»“ trÃªn Firebase Remote Config.

âœ… **Pros:**
- HoÃ n toÃ n MIá»„N PHÃ lÆ°á»£t Ä‘á»c, sinh ra Ä‘á»ƒ lÃ m cÃ¡c viá»‡c nhÆ° "thay Ä‘á»•i cáº¥u hÃ¬nh shop".
- Tá»± Ä‘á»™ng cache dÆ°á»›i mÃ¡y, má»Ÿ app phÃ¡t cÃ³ ngay láº­p tá»©c khÃ´ng lo máº¡ng lag mÃ¨o bá»‹ cá»Ÿi truá»“ng.

âŒ **Cons:**
- Edit JSON báº±ng tay trÃªn console cá»§a Firebase hÆ¡i cá»±c (dá»… dÆ°/thiáº¿u dáº¥u pháº©y `}`).
- KhÃ´ng dÃ¹ng Ä‘Æ°á»£c FireCMS Ä‘á»ƒ edit.

ğŸ“Š **Effort:** Low | **KhuyÃªn dÃ¹ng:** Nhanh gá»n láº¹ náº¿u khÃ´ng thÃªm Ä‘á»“ thÆ°á»ng xuyÃªn.

---

### Option C: TÃ¡ch file JSON Local, sau nÃ y má»›i lÃªn mÃ¢y mÃ¢y
Táº¡m thá»i táº£i toÃ n bá»™ cÃ¡i list tá»« [shop_data.dart](file:///Users/devsang/Developer/App%20Learn%20English/lib/data/data_sources/shop_data.dart) ra má»™t file `assets/data/shop_items.json`. Äá»c file JSON nÃ y vÃ o `ShopItemModel`.

âœ… **Pros:**
- Setup xong ná»n táº£ng Ä‘á»ƒ lÃªn server ngay sau Ä‘Ã³ (vÃ¬ má»i thá»© Ä‘Ã£ thÃ nh logic Ä‘á»c JSON).
- KhÃ´ng lo rá»§i ro sáº­p máº¡ng.
- TÃ¡ch báº¡ch UI vÃ  Data ngay láº­p tá»©c.

âŒ **Cons:**
- Váº«n pháº£i update app má»›i cÃ³ Ä‘á»“ rá»›t rÆ¡i.
- ChÆ°a thoáº£ mÃ£n Ä‘á» bÃ i "Ä‘Æ°a lÃªn online".

ğŸ“Š **Effort:** Low 

---

## ğŸ’¡ Recommendation

**Option A (Káº¿t há»£p Caching local)** lÃ  giáº£i phÃ¡p triá»‡t Ä‘á»ƒ vÃ  chuyÃªn nghiá»‡p nháº¥t.
- ChÃºng ta sáº½ thiáº¿t káº¿ collection `shop_items` trÃªn Firebase.
- Model `ShopItemModel` sáº½ Ä‘Æ°á»£c thÃªm `dx`, `dy`, `scale`.
- Trong [ShopController](file:///Users/devsang/Developer/App%20Learn%20English/lib/presentation/controllers/shop_controller.dart#10-211), khi fetch Ä‘Æ°á»£c Ä‘á»“ trÃªn mÃ¢y sáº½ trá»™n (merge) vá»›i list NÄƒng lÆ°á»£ng cá»¥c bá»™, sau Ä‘Ã³ lÆ°u cache láº¡i Ä‘á»ƒ má»Ÿ app láº§n sau load ngay láº­p tá»©c mÃ  mÃ¨o khÃ´ng bá»‹ tÃ ng hÃ¬nh trang bá»‹.

**CÃ¢u há»i cho anh:**
1. Anh cÃ³ muá»‘n em báº¯t Ä‘áº§u sá»­a `ShopItemModel` vÃ  tÃ­ch há»£p nÃ³ vá»›i logic Ä‘á»c tá»« Firebase (Option A) ngay bÃ¢y giá» khÃ´ng?
2. Vá»›i cÃ¡c mÃ³n Ä‘ang cÃ³ sáºµn (Crown, Magic Hat), em sáº½ viáº¿t sáºµn má»™t list JSON tÆ°Æ¡ng á»©ng Ä‘á»ƒ anh nháº­p lÃªn FireCMS/Firestore nhÃ©?
